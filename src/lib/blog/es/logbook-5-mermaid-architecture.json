{
  "slug": "logbook-5-mermaid-architecture",
  "title": "Bitácora #5: Visualizando la stack con Mermaid.js",
  "date": "2024-05-26",
  "author": "Pinche Poutine",
  "excerpt": "Cómo uso Mermaid.js para documentar la arquitectura técnica de antoine.patraldo.com—desde scripts Bash hasta Cloudflare Edge.",
  "tags": ["Mermaid.js", "Arquitectura", "Cloudflare", "Documentación"],
  "sections": [
    {
      "title": "¿Por qué Mermaid?",
      "content": "Después de construir [antoine.patraldo.com](https://antoine.patraldo.com), me di cuenta de que necesitaba una forma de documentar el flujo—desde los archivos brutos de Antoine hasta la galería interactiva final. Las explicaciones en texto están bien, pero a veces necesitas un **diagrama visual** para entender cómo se conecta todo.\n\nAhí es donde entra **Mermaid.js**. Te permite escribir diagramas como código, lo que significa que puedo mantenerlos en control de versiones junto con mis scripts de Bash y componentes de Svelte."
    },
    {
      "title": "El Diagrama de Arquitectura",
      "content": "Aquí está el flujo completo de la plataforma Antoine Patraldo:\n\n\\`\\`\\`mermaid\ngraph TD\n    %% Inicio del proceso manual/artístico\n    Start[Arte de Antoine] -->|Mayfly Style| Files[Archivos en Linux/Chromebook]\n\n    %% Procesamiento en la terminal (Tu fuerte)\n    subgraph \"Terminal (Bash + FFMPEG)\"\n        Files --> Script[Bash Script]\n        Script --> FF[FFMPEG Processing]\n        FF -->|Optimization| WebReady[Assets Web-Ready]\n    end\n\n    %% Despliegue al Edge\n    subgraph \"Cloudflare Infrastructure\"\n        WebReady -->|Wrangler Upload| R2[Cloudflare R2 / Assets]\n        Script -->|D1 Query| DB[(Cloudflare D1 SQL)]\n        DB ---|Metadata| R2\n    end\n\n    %% El Frontend de SvelteKit 5\n    subgraph \"SvelteKit 5 (The Engine)\"\n        DB -->|JSDoc Types| Hooks[hooks.server.js]\n        Hooks -->|Runes $state| UI[Frontend Interactivo]\n        UI -->|Secure Cookie| Auth[DIY Auth Lucia-based]\n    end\n\n    %% Estilos visuales\n    style Start fill:#f9f,stroke:#333,stroke-width:2px\n    style Script fill:#bbf,stroke:#333,stroke-width:2px\n    style DB fill:#dfd,stroke:#333,stroke-width:2px\n\\`\\`\\`\n\nEste diagrama muestra todo el pipeline: desde el arte bruto de Antoine, pasando por mi procesamiento Bash/FFMPEG, dentro de la infraestructura edge de Cloudflare, y finalmente al frontend de SvelteKit 5."
    },
    {
      "title": "Desglose",
      "content": "**Terminal (Bash + FFMPEG):** Aquí es donde ocurre la magia. Evito las GUIs por completo—todo está scripteado. FFMPEG maneja el escalado de video, conversión de formatos y optimización para entrega web.\n\n**Cloudflare Infrastructure:** R2 almacena los assets reales (videos, imágenes), mientras que D1 contiene los metadatos (títulos, descripciones, datos de sesión). Trabajan juntos de forma transparente.\n\n**SvelteKit 5 (The Engine):** El frontend usa JSDoc para seguridad de tipos, Runes (`$state`, `$derived`) para reactividad, y un sistema de auth DIY inspirado en Lucia Auth—todo corriendo en Cloudflare Workers."
    },
    {
      "title": "Por qué importa",
      "content": "La documentación no tiene que ser aburrida. Con Mermaid, puedo:\n\n- Mantener diagramas en git junto con el código\n- Actualizarlos conforme evoluciona la arquitectura\n- Compartirlos en archivos markdown (¡como este blog post!)\n\nEs la herramienta perfecta para devs que prefieren escribir código en lugar de arrastrar cajas en un GUI."
    }
  ]
}
